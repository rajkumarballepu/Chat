{"ast":null,"code":"import _regeneratorRuntime from\"D:/Mine/socket-io/BasicChat/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"D:/Mine/socket-io/BasicChat/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"D:/Mine/socket-io/BasicChat/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Mine/socket-io/BasicChat/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{AiOutlineSend}from'react-icons/ai';import Bubble from'../Bubble/Bubble';import'./chatStyle.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(_ref){var socket=_ref.socket,author=_ref.author,room=_ref.room;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messageList=_useState4[0],setMessageList=_useState4[1];function sendMessage(_x){return _sendMessage.apply(this,arguments);}function _sendMessage(){_sendMessage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var messageData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(message!=='')){_context.next=6;break;}messageData={id:socket.id,message:message,author:author,room:room,time:getTime()};_context.next=4;return socket.emit(\"sendMessage\",messageData);case 4:setMessageList(function(list){return[].concat(_toConsumableArray(list),[messageData]);});setMessage(\"\");case 6:case\"end\":return _context.stop();}},_callee);}));return _sendMessage.apply(this,arguments);}useEffect(function(){socket.off(\"recievedMessage\").on(\"recievedMessage\",function(data){console.log(data.id);console.log(socket.id);setMessageList(function(list){return[].concat(_toConsumableArray(list),[data]);});});},[messageList,socket]);function getTime(){var day=new Date();var hh=day.getHours()>12?day.getHours()-12:day.getHours();var mm=day.getMinutes()>9?day.getMinutes():'0'+day.getMinutes();var time=\"\".concat(hh>9?hh:'0'+hh,\":\").concat(mm,\" \").concat(day.getHours()>11?\"pm\":\"am\");return time;}return/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Hello \",/*#__PURE__*/_jsx(\"span\",{className:\"spl\",children:author})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"You are now joined Room \",/*#__PURE__*/_jsx(\"span\",{className:\"spl\",children:room})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-body\",children:messageList.map(function(messageData){return/*#__PURE__*/_jsx(Bubble,{socketId:socket.id,messageData:messageData,author:author},socket.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-foot\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"message\",placeholder:\"Type your message\",value:message,onChange:function onChange(event){setMessage(event.target.value);},onKeyPress:function onKeyPress(event){event.key==='Enter'&&sendMessage();}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:sendMessage,children:/*#__PURE__*/_jsx(AiOutlineSend,{className:\"send-icon\"})})]})]});}export default Chat;","map":{"version":3,"names":["React","useEffect","useState","AiOutlineSend","Bubble","jsx","_jsx","jsxs","_jsxs","Chat","_ref","socket","author","room","_useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","messageList","setMessageList","sendMessage","_x","_sendMessage","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","messageData","wrap","_callee$","_context","prev","next","id","time","getTime","emit","list","concat","_toConsumableArray","stop","off","on","data","console","log","day","Date","hh","getHours","mm","getMinutes","className","children","map","socketId","type","name","placeholder","value","onChange","target","onKeyPress","key","onClick"],"sources":["D:/Mine/socket-io/BasicChat/client/src/component/Chat/Chat.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { AiOutlineSend } from 'react-icons/ai';\nimport Bubble from '../Bubble/Bubble';\nimport './chatStyle.css';\n\nfunction Chat ({socket, author, room}){\n\n      const [message, setMessage] = useState(\"\");\n      const [messageList, setMessageList] = useState([]);\n      async function sendMessage(event) {\n            if(message !== '') {\n                  const messageData = {\n                        id: socket.id,\n                        message: message,\n                        author: author,\n                        room: room,\n                        time: getTime(),\n                  }\n                  await socket.emit(\"sendMessage\",messageData);\n                  setMessageList((list)=>[...list, messageData]);\n                  setMessage(\"\");\n            }\n      }\n      useEffect(()=>{\n            socket.off(\"recievedMessage\").on(\"recievedMessage\",(data)=>{\n                  console.log(data.id);\n                  console.log(socket.id);\n                  setMessageList((list)=>[...list, data]);\n                  \n            })\n      },[messageList, socket]);\n      function getTime() {\n            const day = new Date();\n            const hh = day.getHours()>12 ? day.getHours()-12: day.getHours();\n            const mm = day.getMinutes()>9 ? day.getMinutes(): '0'+day.getMinutes();\n            const time = `${hh>9?hh:'0'+hh}:${mm} ${day.getHours()>11 ? \"pm\" : \"am\"}`;\n            return time;\n      }\n      return (\n            <div className=\"chat\">\n                  <div className=\"chat-header\">\n                        <h1>Hello <span className=\"spl\">{author}</span></h1>\n                        <p>You are now joined Room <span className=\"spl\">{room}</span></p>\n                  </div>\n                  <div className=\"chat-body\">\n                        {\n                              messageList.map((messageData) => {\n                                    return <Bubble key={socket.id} socketId={socket.id} messageData={messageData} author={author} />\n\n                        })}\n                  </div>\n                  <div className=\"chat-foot\">\n                  <input type=\"text\" name=\"message\" placeholder=\"Type your message\" value={message} onChange={\n                        (event)=>{\n                              setMessage(event.target.value);\n                        }\n                  } onKeyPress={(event)=> {\n                        event.key === 'Enter' && sendMessage();\n                  }} />\n                  <button type=\"button\" onClick={sendMessage}><AiOutlineSend className=\"send-icon\"/></button>\n                  </div>\n            </div>\n      )\n}\n\nexport default Chat;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}